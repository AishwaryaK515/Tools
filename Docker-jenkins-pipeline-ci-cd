CI-CD pipeline
we will push the code to the git-hub and from the github we will push the code through jenkinsand after pulling the code from the github we will test the code on sonarqube after scanning the code we will deploy using 
docker and everything will be done on ec2 iinstance
we 3 need 3 instance
1. for jenkins
2. for sonarqube
3 for docker deployment
after deploying we will execute in browser




ğŸ“Œ What is Docker?
Docker is a containerization platform that allows you to package applications and their dependencies into lightweight, portable containers.

âœ… Why Use Docker?
âœ” Works on Any OS â€“ No dependency issues
âœ” Lightweight â€“ Uses fewer resources than VMs
âœ” Scalable â€“ Run multiple containers easily
âœ” Faster Deployment â€“ No need for re-installing dependencies

ğŸ”¹ Step 1: Install Docker on Amazon Linux
1ï¸âƒ£ Update System Packages
-  sudo yum update -y
 2ï¸âƒ£ Install Docker
-  sudo yum install -y docker
3ï¸âƒ£ Start & Enable Docker
-  sudo systemctl start docker
-  sudo systemctl enable docker
4ï¸âƒ£ Verify Docker Installation
-  docker --version
5ï¸âƒ£ Run a Test Container
-  docker run hello-world
âœ… If you see "Hello from Docker!", your installation is successful! ğŸ‰


ğŸ”¹ Step 2: Understanding Docker Terminology
ğŸ› ï¸ Image vs. Container
Docker Image â†’ A template with application code & dependencies. (Like an ISO file)
Docker Container â†’ A running instance of an image. (Like a virtual machine)
ğŸ› ï¸ Docker Hub
A cloud repository where you can store and share Docker images.

âœ… Example: Pull an image from Docker Hub
-  docker pull nginx
âœ… List downloaded images
-  docker images


ğŸ”¹ Step 3: Working with Containers
1ï¸âƒ£ Run a Container in Foreground Mode
-  docker run ubuntu
ğŸš€ Runs an Ubuntu container (but exits immediately because no command is running)
2ï¸âƒ£ Run a Container in Interactive Mode
-  docker run -it ubuntu bash
âœ… Now you are inside the container:
root@container-id:/#
Type exit to leave the container.
3ï¸âƒ£ Run a Container in Detached Mode (Background)
- docker run -d nginx
âœ… Check Running Containers
-  docker ps
âœ… Stop a Running Container
-  docker stop <container_id>
âœ… Remove a Stopped Container
-  docker rm <container_id>


ğŸ”¹ Step 4: Exposing a Web Application in a Container
Let's run a web server inside a Docker container.
-  docker run -d -p 8080:80 nginx
-d â†’ Runs container in detached mode
-p 8080:80 â†’ Maps port 80 inside the container to port 8080 on the host
âœ… Test in Browser:
-  docker stop <container_id>

ğŸ”¹ Step 5: Managing Docker Containers & Images
âœ… View Running Containers     -  docker ps
âœ… View All Containers (Including Stopped)      -  docker ps -a
âœ… Check Container Logs                         -  docker logs <container_id>
âœ… Remove an Image                              -  docker rmi nginx
âœ… Remove All Stopped Containers                -  docker container prune -f
âœ… Remove Unused Docker Images                  -  docker image prune -a -f
âœ… Remove All Docker Resources (Images, Containers, Networks, Volume      -  docker system prune -a -f
















# **ğŸš€ Building Custom Docker Images (Amazon Linux Edition)**  

Now that we understand **Docker basics**, let's **build our own Docker image** from scratch!  

âœ… **What Will We Do?**  
1ï¸âƒ£ Create a simple **Java application**  
2ï¸âƒ£ Write a **Dockerfile** to containerize it  
3ï¸âƒ£ Build a custom **Docker image**  
4ï¸âƒ£ Run a container from our image  

---

# **ğŸ”¹ Step 1: Create a Sample Java Application**
We'll create a simple **Java application** that prints **"Hello, Docker!"**.  

### **1ï¸âƒ£ Navigate to Your Project Directory**
```bash
mkdir myapp && cd myapp
```

### **2ï¸âƒ£ Create a Java File**
```bash
nano App.java
```

### **3ï¸âƒ£ Write the Java Code**
```java
public class App {
    public static void main(String[] args) {
        System.out.println("Hello, Docker!");
    }
}
```
ğŸ“Œ **Save and exit (`CTRL + X`, then `Y`, then `Enter`).**  

---

# **ğŸ”¹ Step 2: Compile the Java Application**
Before creating a Docker image, let's **compile the Java file**.

```bash
javac App.java
```
This generates `App.class`, which is the compiled Java program.

---

# **ğŸ”¹ Step 3: Create a Dockerfile**
A **Dockerfile** tells Docker how to build an image.

### **1ï¸âƒ£ Create a New Dockerfile**
```bash
nano Dockerfile
```

### **2ï¸âƒ£ Write the Dockerfile**
```dockerfile
# Use Amazon Corretto 17 as the base image
FROM amazoncorretto:17

# Set the working directory inside the container
WORKDIR /app

# Copy compiled Java class into the container
COPY App.class .

# Command to run the application
CMD ["java", "App"]
```
ğŸ“Œ **Save and exit (`CTRL + X`, then `Y`, then `Enter`).**  

---

# **ğŸ”¹ Step 4: Build the Docker Image**
Now that our **Dockerfile** is ready, let's build the image.

```bash
docker build -t my-java-app .
```
âœ… **Expected Output:**
```
Successfully built <IMAGE_ID>
Successfully tagged my-java-app:latest
```

### **Verify the Image**
```bash
docker images | grep my-java-app
```
âœ… **Output Example:**
```
my-java-app   latest   123456789abc   5 minutes ago   300MB
```

---

# **ğŸ”¹ Step 5: Run a Container from Our Image**
```bash
docker run my-java-app
```
âœ… **Output:**  
```
Hello, Docker!
```
ğŸ‰ **Congratulations! Your Java app is running inside a Docker container!**  

---

# **ğŸ”¹ Step 6: Tag & Push to Docker Hub**
Now that we have our image, letâ€™s push it to **Docker Hub**.

### **1ï¸âƒ£ Log in to Docker Hub**
```bash
docker login
```
Enter your **Docker Hub username** and **password**.

### **2ï¸âƒ£ Tag the Image**
```bash
docker tag my-java-app aishwaryak2601/my-java-app:latest
```

### **3ï¸âƒ£ Push the Image to Docker Hub**
```bash
docker push aishwaryak2601/my-java-app:latest
```
âœ… **Now your image is available on Docker Hub!** ğŸ‰  

---

# **ğŸ”¹ Step 7: Run Your Dockerized App on Any Server**
Now that the image is on **Docker Hub**, you can **run it on any machine**.

### **On a New Server**
```bash
docker pull aishwaryak2601/my-java-app:latest
docker run aishwaryak2601/my-java-app:latest
```
âœ… **Your application is running inside a container!** ğŸš€  

---

# **âœ… Summary**
âœ” Created a **Java application**  
âœ” Wrote a **Dockerfile**  
âœ” **Built & ran** a custom Docker image  
âœ” **Pushed the image** to Docker Hub  
âœ” Pulled & ran the image on another machine  

---












# **ğŸš€ Automating Docker Build & Push with Jenkins CI/CD (Amazon Linux)**  

Now that we've successfully built and pushed a **custom Docker image**, let's **automate** this process using **Jenkins**.  

âœ… **What Will We Do?**  
1ï¸âƒ£ Modify the **Jenkinsfile** to include Docker build & push  
2ï¸âƒ£ Store **Docker Hub credentials** in Jenkins  
3ï¸âƒ£ Run the pipeline to **automate CI/CD**  

---

## **ğŸ”¹ Step 1: Update Jenkinsfile for Docker Automation**
Modify your **Jenkinsfile** to:  
- **Clone the repository**  
- **Build the Java application**  
- **Build a Docker image**  
- **Push it to Docker Hub**  

### **ğŸ›  Update Your `Jenkinsfile`**
```groovy
pipeline {
    agent any

    environment {
        DOCKER_IMAGE = "aishwaryak2601/my-java-app:latest"
    }

    tools {
        maven 'maven'   // Ensure Maven is installed in Jenkins Global Tool Configuration
    }

    stages {
        stage('Clone Repository') {
            steps {
                git branch: 'main', url: 'https://github.com/AishwaryaK515/new-repo.git'
            }
        }

        stage('Build & Test') {
            steps {
                sh 'mvn clean package'
                sh 'mvn test'
            }
        }

        stage('Build Docker Image') {
            steps {
                sh 'docker build -t $DOCKER_IMAGE .'
            }
        }

        stage('Push Docker Image to Docker Hub') {
            steps {
                withCredentials([usernamePassword(credentialsId: 'docker-hub-credentials', usernameVariable: 'DOCKER_USER', passwordVariable: 'DOCKER_PASS')]) {
                    sh 'echo $DOCKER_PASS | docker login -u $DOCKER_USER --password-stdin'
                    sh 'docker push $DOCKER_IMAGE'
                }
            }
        }

        stage('Deploy') {
            steps {
                echo 'Deploying the application...'
            }
        }
    }  // Closing brace for 'stages'

    post {
        success {
            echo "ğŸš€ Deployment Successful!"
        }
        failure {
            echo "âŒ Deployment Failed!"
        }
    }
}  // Closing brace for 'pipeline'

```
âœ… **What This Jenkinsfile Does:**  
âœ” **Clones the repository**  
âœ” **Builds & tests the Java project**  
âœ” **Builds a Docker image**  
âœ” **Pushes the image to Docker Hub**  

ğŸ“Œ **Now, letâ€™s store Docker credentials in Jenkins.**  

---

## **ğŸ”¹ Step 2: Add Docker Hub Credentials to Jenkins**
Since Jenkins needs **authentication** to push images, we must **store Docker Hub credentials** in Jenkins.

### **1ï¸âƒ£ Add Credentials in Jenkins**
1. **Go to Jenkins Dashboard â†’ Manage Jenkins â†’ Manage Credentials**  
2. **Select "Global Credentials (unrestricted)"**  
3. Click **"Add Credentials"**  
4. **Choose "Username & Password"**  
   - **Username:** Your **Docker Hub username**  
   - **Password:** Your **Docker Hub password**  
   - **ID:** `docker-hub-credentials` (must match the Jenkinsfile)  
5. Click **OK**  

âœ… **Now, Jenkins can push Docker images securely!**  

---

## **ğŸ”¹ Step 3: Run the Jenkins Pipeline**
### **1ï¸âƒ£ Go to Jenkins Dashboard â†’ Your Pipeline Job**
### **2ï¸âƒ£ Click "Build Now"**
### **3ï¸âƒ£ Monitor the Console Output**
âœ… **You should see:**
- âœ… Clone the repo  
- âœ… Build & test the Java project  
- âœ… Build a Docker image  
- âœ… Push the image to Docker Hub  

---

## **ğŸ”¹ Step 4: Deploy & Run Your Dockerized Application**
Now that Jenkins **automates CI/CD**, you can **run your application anywhere**.

### **On a New Server**
```bash
docker pull yourdockerhubuser/my-java-app:latest
docker run -d -p 8080:8080 yourdockerhubuser/my-java-app:latest
```
âœ… **Now your app is running inside a Docker container!** ğŸš€  

---

# **âœ… Summary**
âœ” Updated Jenkinsfile to **automate Docker build & push**  
âœ” Stored **Docker Hub credentials** securely in Jenkins  
âœ” Ran a **Jenkins CI/CD pipeline** to automate everything  
âœ” Pulled & deployed the Docker image anywhere  

---




















































